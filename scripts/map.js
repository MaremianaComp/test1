var r=null,d=null,g=!1,h="5b87e019263b082d3dcc8dd576d2e87ca39dab8d";function c(){let e=document.getElementById("address");if(!e)return;e.style.height="auto";let t=60,o=e.scrollHeight;e.style.height=`${Math.max(t,o)}px`}function f(){let e=document.getElementById("address");if(!e)return;let t=e.value,o=window.innerWidth<=768;e.value="",o?e.placeholder=`\u0433. \u0421\u0430\u043D\u043A\u0442-\u041F\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433
\u043F\u0440. \u041F\u0440\u043E\u0441\u0432\u0435\u0449\u0435\u043D\u0438\u044F, \u0434. 99, \u043A\u0432. 152`:e.placeholder="\u0433. \u0421\u0430\u043D\u043A\u0442-\u041F\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433, \u043F\u0440. \u041F\u0440\u043E\u0441\u0432\u0435\u0449\u0435\u043D\u0438\u044F, \u0434. 99, \u043A\u0432. 152",e.value=t,c()}function m(){g||typeof ymaps>"u"||ymaps.ready(()=>{try{if(r)return;r=new ymaps.Map("map",{center:[59.9386,30.3141],zoom:12,controls:["zoomControl"]}),console.log("\u041A\u0430\u0440\u0442\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0430"),g=!0,T(),v(),A()}catch(e){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u0438 \u043A\u0430\u0440\u0442\u044B:",e)}})}function T(){let e=document.getElementById("address");e&&(f(),e.addEventListener("input",()=>{c()}),window.addEventListener("resize",()=>{f(),c()}),setTimeout(()=>{c()},100))}function v(){let e=document.getElementById("address");e&&(e.addEventListener("input",D(()=>{let t=e.value.trim();t&&t.length>5&&l(t)},1e3)),e.addEventListener("blur",()=>{let t=e.value.trim();t&&l(t)}),r&&r.events.add("click",t=>{let o=t.get("coords");b(o)}))}function D(e,t){let o;return function(...n){let s=()=>{clearTimeout(o),e(...n)};clearTimeout(o),o=setTimeout(s,t)}}async function l(e){try{let t="https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/address",o={method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Token ${h}`},body:JSON.stringify({query:e,count:1,locations:[{country:"\u0420\u043E\u0441\u0441\u0438\u044F"}],restrict_value:!0})},a=await fetch(t,o);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);let n=await a.json();if(n&&n.suggestions&&n.suggestions.length>0){let s=n.suggestions[0];if(s.data&&s.data.geo_lat&&s.data.geo_lon){let p=[parseFloat(s.data.geo_lat),parseFloat(s.data.geo_lon)],y=document.getElementById("address");y.value=s.value||e,setTimeout(()=>{c()},50),u(p,s.value||e),console.log("\u0410\u0434\u0440\u0435\u0441 \u043D\u0430\u0439\u0434\u0435\u043D \u0447\u0435\u0440\u0435\u0437 DaData:",s.value)}else console.warn("\u041A\u043E\u043E\u0440\u0434\u0438\u043D\u0430\u0442\u044B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B \u0432 \u043F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0435 DaData, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u043C \u042F\u043D\u0434\u0435\u043A\u0441"),i(e)}else console.warn("\u041F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0438 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B \u0434\u043B\u044F \u0430\u0434\u0440\u0435\u0441\u0430:",e),i(e)}catch(t){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0433\u0435\u043E\u043A\u043E\u0434\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u0447\u0435\u0440\u0435\u0437 DaData:",t),i(e)}}function i(e){!r||typeof ymaps>"u"||ymaps.geocode(e,{results:1}).then(t=>{let o=t.geoObjects.get(0);if(o){let a=o.geometry.getCoordinates(),n=o.getAddressLine(),s=document.getElementById("address");s.value=n,setTimeout(()=>{c()},50),u(a,n),console.log("\u0410\u0434\u0440\u0435\u0441 \u043D\u0430\u0439\u0434\u0435\u043D \u0447\u0435\u0440\u0435\u0437 \u042F\u043D\u0434\u0435\u043A\u0441:",n)}}).catch(t=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0433\u0435\u043E\u043A\u043E\u0434\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u0447\u0435\u0440\u0435\u0437 \u042F\u043D\u0434\u0435\u043A\u0441:",t)})}function b(e){typeof ymaps>"u"||ymaps.geocode(e).then(t=>{let o=t.geoObjects.get(0);if(o){let a=o.getAddressLine(),n=document.getElementById("address");n.value=a,setTimeout(()=>{c()},50),u(e,a)}}).catch(t=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u0440\u0430\u0442\u043D\u043E\u0433\u043E \u0433\u0435\u043E\u043A\u043E\u0434\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F:",t)})}function u(e,t){r&&(d&&r.geoObjects.remove(d),d=new ymaps.Placemark(e,{balloonContent:t,hintContent:"\u0410\u0434\u0440\u0435\u0441 \u0434\u043E\u0441\u0442\u0430\u0432\u043A\u0438"},{preset:"islands#redDotIcon",balloonCloseButton:!1}),r.geoObjects.add(d),r.setCenter(e,16))}function A(){let e=document.getElementById("address");e&&e.value.trim()&&(setTimeout(()=>{c()},200),setTimeout(()=>{let t=e.value.trim();t&&l(t)},1500))}document.addEventListener("DOMContentLoaded",()=>{if(console.log("DOM \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D, \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0438\u0440\u0443\u0435\u043C \u043A\u0430\u0440\u0442\u0443..."),typeof ymaps<"u")setTimeout(m,500);else{let e=setInterval(()=>{typeof ymaps<"u"&&(clearInterval(e),setTimeout(m,500))},100)}});
